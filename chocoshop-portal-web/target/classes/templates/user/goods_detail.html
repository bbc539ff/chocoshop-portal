<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

   <head>
      <meta charset="UTF-8">
      <title></title>
      <link href="/user/css/bootstrap.min.css" rel="stylesheet">
      <script src="/user/js/jquery.min.js"></script>
      <script src="/user/js/popper.min.js"></script>
      <script src="/user/js/bootstrap.min.js"></script>
      <script src="/js/js.cookie-2.2.1.min.js"></script>
      <script src="/user/js/chocoUtils.js"></script>
   </head>

   <body>
      <div id="navbar"></div>
      <script>
         $("#navbar").load("/user/navbar")
      </script>

      <div class="container">
         <div class="row">
            <div class="col-md-4">
               <div id="carouselExampleInterval" class="carousel slide" data-ride="carousel">
                  <div class="carousel-inner" id="carouselPics">

                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleInterval" role="button" data-slide="prev">
                     <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                     <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleInterval" role="button" data-slide="next">
                     <span class="carousel-control-next-icon" aria-hidden="true"></span>
                     <span class="sr-only">Next</span>
                  </a>
               </div>
            </div>
            <div class="col-md-8">
               <h4 th:text="${goods.goodsTitle}"></h4>
               <br />
               <h4 style="color: red;">¥ <span th:text="${goods.goodsPrice}"></span></h4>
               <br />
               <span>数量</span><input type="text" style="width: 50px;margin: 5px;" id="addNum" /><span>件</span>
               <br />
               <button th:id="${goods.goodsId}" class="btn btn-outline-primary" style="width: 150px;" onclick="addMul(this)">加入购物车</button><button class="btn btn-outline-primary" style="width: 150px;margin: 20px;">立即购买</button>
               <br />
               <br />
               <div>服务承诺: </div>
               <div>不支持七天无理由退换 正品保证 极速退款 </div>
            </div>
         </div>
      </div>

      <div class="container">
         <div class="row">
            <div class="col" id="detail"></div>
         </div>
      </div>

      <script th:inline="javascript">
         $('#detail').html( /*[[${goods.goodsDetail}]]*/ )

         var goodsImageurl = /*[[${goods.goodsImageurl}]]*/
            var urls = goodsImageurl.split(',')
         for(var i = 0; i < urls.length; i++) {
            if(urls[i].trim() == '') continue
            var url = ''
            if(i == 0) url = '<div class="carousel-item active" data-interval="10000">'
            else url = '<div class="carousel-item" data-interval="10000">'
            url += '<img src="' + urls[i].trim() + '" class="d-block w-100" alt="...">' +
               '</div>'
            $('#carouselPics').append(url)
         }
         
         function addMul(obj){
            var addNum = $('#addNum').val()
            addGoodsToCart(obj, addNum)
         }
      </script>

   </body>

</html>